<navigation-bar 
  title="八字分析" 
  back="{{true}}" 
  color="black" 
  background="#FFF">
</navigation-bar>

<view class="result-container" 
      bindtouchstart="handleTouchStart" 
      bindtouchmove="handleTouchMove">
  <!-- 基本信息展示 -->
  <view class="basic-info">
    <view class="info-row">
      <text class="label">姓名：</text>
      <text class="value">{{params.name}}</text>
      <text class="label">性别：</text>
      <text class="value">{{params.gender === 'male' ? '男' : '女'}}</text>
    </view>
    <view class="info-row">
      <text class="label">出生：</text>
      <text class="value">{{params.birthDateTime}}</text>
    </view>
    <view class="info-row">
      <text class="label">地点：</text>
      <text class="value">{{params.region[0]}} {{params.region[1]}} {{params.region[2]}}</text>
    </view>
  </view>

  <!-- 八字展示区 -->
  <view class="bazi-display">
    <view class="bazi-row">
      <view class="bazi-cell">
        <text class="bazi-label">年柱</text>
        <view class="bazi-value">
          <text>{{baziInfo.year.gan}}{{baziInfo.year.zhi}}</text>
        </view>
      </view>
      <view class="bazi-cell">
        <text class="bazi-label">月柱</text>
        <view class="bazi-value">
          <text>{{baziInfo.month.gan}}{{baziInfo.month.zhi}}</text>
        </view>
      </view>
      <view class="bazi-cell">
        <text class="bazi-label">日柱</text>
        <view class="bazi-value">
          <text>{{baziInfo.day.gan}}{{baziInfo.day.zhi}}</text>
        </view>
      </view>
      <view class="bazi-cell">
        <text class="bazi-label">时柱</text>
        <view class="bazi-value">
          <text>{{baziInfo.time.gan}}{{baziInfo.time.zhi}}</text>
        </view>
      </view>
    </view>
  </view>


  <!-- 思考过程展示区 -->
  <view class="thinking-section {{showThinking ? 'expanded' : ''}}">
    <view class="thinking-header sticky" bindtap="toggleThinking">
      <text>思考过程</text>
      <view class="thinking-status" wx:if="{{thinking}}">
        <text class="loading-text">思考中</text>
        <view class="loading-dots">
          <text>.</text><text>.</text><text>.</text>
        </view>
      </view>
      <view class="toggle-icon">{{showThinking ? '收起' : '展开'}}</view>
    </view>
    
    <view class="thinking-content" hidden="{{!showThinking}}">
      <towxml nodes="{{reasoningContentMarkdown}}" />
    </view>
  </view>

  <!-- 分析结果展示区 -->
  <view class="analysis-content">
    <view class="header sticky">
      <text class="title">分析结果</text>
    </view>

    <!-- 分析步骤
    <view class="analysis-steps">
      <block wx:for="{{analysisSteps}}" wx:key="index">
        <view class="step-item {{item ? 'show' : ''}}">
          <view class="step-number">步骤 {{index + 1}}</view>
          <view class="step-content">{{item}}</view>
        </view>
      </block>
    </view> -->
    <towxml nodes="{{fullContentMarkdown}}" />
  </view>

  <!-- 添加免责声明 -->
  <view class="disclaimer">
    本结果由DeepSeek智能算法生成，内容仅供娱乐参考。请您理性看待，切勿迷信或用于重要决策。AI预测不代表真实命运，请以积极心态面对生活。
  </view>
</view> 